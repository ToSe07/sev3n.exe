<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SEV3N.EXE</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Courier New', Courier, monospace;
      background: url('card.png') no-repeat center center fixed;
      background-size: cover;
      color: #00f7ff;
      overflow-x: hidden;
    }

    #login-btn {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 20;
      padding: 10px 20px;
      background: transparent;
      border: 2px solid #00f7ff;
      color: #00f7ff;
      font-size: 18px;
      cursor: pointer;
      display: block;
    }

    #main-content {
      display: none;
      position: relative;
      width: 100%;
      min-height: 100vh;
      padding: 40px;
      box-sizing: border-box;
      background: rgba(0, 0, 0, 0.6);
      z-index: 5;
    }

    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 10px;
    }

    .menu {
      margin-bottom: 30px;
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .menu-item {
      cursor: pointer;
      padding: 5px 10px;
      border: 1px solid #00f7ff;
    }

    .menu-item:hover {
      box-shadow: 0 0 8px #00f7ff;
      background-color: rgba(0, 255, 255, 0.1);
    }

    .menu-item.glow {
      box-shadow: 0 0 12px #00f7ff, 0 0 24px #00f7ff;
      transition: box-shadow 0.3s ease-in-out;
    }

    .sectors {
      display: none;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .sector-card {
      padding: 10px;
      width: 220px;
      text-align: center;
      cursor: pointer;
      background-color: rgba(0, 0, 0, 0.0);
    }

    .sector-card:hover img,
    .sector-card.glow img {
      box-shadow: 0 0 12px #00f7ff, 0 0 24px #00f7ff;
      transition: box-shadow 0.3s ease-in-out;
    }

    .sector-image {
      width: 100%;
      height: auto;
      border-radius: 12px;
      cursor: pointer;
      border: none;
      outline: none;
      box-shadow: none;
    }

    .sector-image:focus {
      outline: none;
      box-shadow: none !important;
    }

    .sector-title {
      margin-top: 8px;
      font-size: 16px;
      font-weight: bold;
      text-align: center;
      color: #00f7ff;
      text-shadow: 0 0 5px #00f7ff;
    }

    .sector-detail {
      display: none;
      margin-top: 10px;
      font-size: 14px;
      color: #00f7ff;
    }

    #donate-box, #message-box {
      display: none;
      text-align: center;
      margin-top: 20px;
    }

    #footer {
      margin-top: 40px;
      width: 100%;
      text-align: center;
      color: #00f7ff;
      font-size: 14px;
      text-shadow: 0 0 4px #00f7ff;
    }

    #game-frame {
      display: none;
      margin-top: 30px;
      text-align: center;
    }

    iframe {
      border: 1px solid #00f7ff;
    }

    .chat-box {
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #00f7ff;
      padding: 10px;
      margin: 0 auto;
      width: 90%;
      background-color: rgba(0, 255, 255, 0.05);
      box-shadow: 0 0 10px #00f7ff33;
      border-radius: 8px;
      font-size: 14px;
      line-height: 1.5;
      text-align: left;
    }

    .chat-box p {
      margin: 6px 0;
    }
  
    .tier-btn {
      padding: 8px 12px;
      border: 1px solid #00f7ff;
      background: transparent;
      color: #00f7ff;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
    }
    .tier-btn.active {
      background-color: rgba(0, 255, 255, 0.2);
      box-shadow: 0 0 12px #00f7ff, 0 0 24px #00f7ff;
    }
    .tier-btn:hover {
      background-color: rgba(0, 255, 255, 0.1);
    }


    .tier-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 16px #00f7ff, 0 0 32px #00f7ff;
    }

    #tier-image {
      transition: transform 0.5s ease, opacity 0.5s ease;
    }

    #tier-display.show img {
      transform: scale(1.02);
      opacity: 1;
    }

    @keyframes fadeRise {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #tier-display {
      animation: fadeRise 0.5s ease forwards;
    }

    .menu-item {
      transition: all 0.3s ease-in-out;
    }

    .menu-item.glow {
      transition: box-shadow 0.5s ease-in-out, transform 0.3s ease-in-out;
      transform: scale(1.1);
    }

</style>
</head>
<body>
  <button id="login-btn">Log In</button>

  <div id="main-content">
    <h1>SEV3N.EXE</h1>
    <p style="text-align:center;">System booted by love, powered by fans.</p>

    <div class="menu">
      <div class="menu-item" id="nav-log">[NAVIGATION LOG]</div>
      <div class="menu-item" id="nav-artifacts">[RETRIEVED ARTIFACTS]</div>
      <div class="menu-item" id="nav-supply">[SUPPLY STATIONS]</div>
      <div class="menu-item" id="nav-comm">[COMM LINK]</div>
      <div class="menu-item" id="play-game">[PLAY GAME]</div>
      <div class="menu-item" id="nav-donate">[DONATE]</div>
      <div class="menu-item" id="nav-message">[MESSAGE TO SEV3N]</div>
    </div>

    <div class="sectors" id="sector-list">
      <div class="sector-card" onclick="toggleDetail('detail1'); glowEffect(this)">
        <img src="card1.png" alt="Sector 1" class="sector-image">
        <div class="sector-title">[SECTOR 1] - 18.000.000 VND</div>
        <div class="sector-detail" id="detail1">Booth MOVIE ATVNCG (BHD Ph·∫°m Ng·ªçc Th·∫°ch)</div>
      </div>
      <div class="sector-card" onclick="toggleDetail('detail2'); glowEffect(this)">
        <img src="card2.png" alt="Sector 2" class="sector-image">
        <div class="sector-title">[SECTOR 2] - 10.000.000 VND</div>
        <div class="sector-detail" id="detail2">Backdrop v√† fangift support minishow M√¢y lang thang SX7</div>
      </div>
      <div class="sector-card" onclick="toggleDetail('detail3'); glowEffect(this)">
        <img src="card3.png" alt="Sector 3" class="sector-image">
        <div class="sector-title">[SECTOR 3] - 10.000.000 VND</div>
        <div class="sector-detail" id="detail3">Cafe Event in Concert ATVNCG OCP3<br>Fangift in Concert ATVNCG OCP3</div>
      </div>
      <div class="sector-card" onclick="toggleDetail('detail4'); glowEffect(this)">
        <img src="card4.png" alt="Sector 4" class="sector-image">
        <div class="sector-title">[SECTOR 4] - 15.000.000 VND</div>
        <div class="sector-detail" id="detail4">LED support minishow HN and concert ATVNCG</div>
      </div>
    </div>

    <div id="game-frame">
      <iframe src="shooter.html" width="90%" height="600px"></iframe>
    </div>

    <div id="donate-box">
      <p>C·∫£m ∆°n b·∫°n ƒë√£ ·ªßng h·ªô SEV3N.EXE!</p>
      <p>T·ªïng donate: <span id="donate-amount">...</span></p>
    </div>

    <div id="message-box">
      <form id="local-message-form" style="margin-bottom: 10px;">
        <textarea id="local-message-input" rows="4" style="width:90%; padding:8px;" placeholder="G·ª≠i th∆∞ cho SEV3N..."></textarea>
        <br>
        <button type="submit" style="margin-top: 8px; padding: 6px 12px;">Send</button>
      </form>
      <div id="local-message-history" class="chat-box"></div>
    </div>
    <div id="artifact-tier-section" style="display: none; text-align: center; margin-top: 20px;">
      <div id="tier-buttons" style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 20px;">
        <button class="tier-btn" data-tier="1">[TIER 1]: 89‚Äì199</button>
        <button class="tier-btn" data-tier="2">[TIER 2]: 200‚Äì400</button>
        <button class="tier-btn" data-tier="3">[TIER 3]: 401‚Äì776</button>
        <button class="tier-btn" data-tier="4">[TIER 4]: 777‚Äì1039</button>
        <button class="tier-btn" data-tier="5">[TIER 5]: >=1040</button>
        <button class="tier-btn" data-tier="6">[TIER 6]: TOP</button>
      </div>
      <div id="tier-display" style="display: none; opacity: 0; transition: opacity 0.5s;">
        <img id="tier-image" src="" alt="Tier Image" style="max-width: 90%; border-radius: 12px; box-shadow: 0 0 12px #00f7ff;">
      </div>
    </div>

<div id="footer">¬© 2025 TOSE.TEAM | SYSTEM ID: 07-SEV3N</div>
  </div>

  <script>
    const loginBtn = document.getElementById('login-btn');
    const mainContent = document.getElementById('main-content');
    const navLog = document.getElementById('nav-log');
    const navArtifacts = document.getElementById('nav-artifacts');
    const navSupply = document.getElementById('nav-supply');
    const navComm = document.getElementById('nav-comm');
    const playGame = document.getElementById('play-game');
    const navDonate = document.getElementById('nav-donate');
    const navMessage = document.getElementById('nav-message');

    const sectors = document.getElementById('sector-list');
    const gameFrame = document.getElementById('game-frame');
    const donateBox = document.getElementById('donate-box');
    const messageBox = document.getElementById('message-box');

    
    function hideAllSections() {
      sectors.style.display = 'none';
      gameFrame.style.display = 'none';
      donateBox.style.display = 'none';
      messageBox.style.display = 'none';
      if (artifactSection) {
        artifactSection.style.display = 'none';
        tierDisplay.style.opacity = 0;
        tierDisplay.style.display = 'none';
        tierButtons.forEach(btn => btn.classList.remove('active'));
      }
    }


    loginBtn.onclick = () => {
      loginBtn.style.display = 'none';
      mainContent.style.display = 'block';
    };

    const unlockTimeVN = new Date(Date.UTC(2025, 4, 4, 17, 0, 0)); // May 4, 00:00 GMT+7

    navLog.onclick = (e) => {
      const now = new Date();
      const nowUTC7 = new Date(now.getTime() + (7 * 60 * 60 * 1000));
      if (nowUTC7 >= unlockTimeVN) {
        hideAllSections();
        sectors.style.display = 'flex';
        glowEffect(e.target);
      } else {
        alert('SECTOR LOCKED: Available from 00:00, May 4, 2025 (GMT+7)');
      }
    };

    navArtifacts.onclick = (e) => {
      hideAllSections();
      glowEffect(e.target);
    };

    navSupply.onclick = (e) => {
      hideAllSections();
      glowEffect(e.target);
    };

    navComm.onclick = (e) => {
      hideAllSections();
      glowEffect(e.target);
    };

    playGame.onclick = (e) => {
      hideAllSections();
      gameFrame.style.display = 'block';
      glowEffect(e.target);
    };

    navDonate.onclick = (e) => {
      hideAllSections();
      donateBox.style.display = 'block';
      glowEffect(e.target);
    };

    navMessage.onclick = (e) => {
      hideAllSections();
      messageBox.style.display = 'block';
      glowEffect(e.target);
    };

    function toggleDetail(id) {
      const detail = document.getElementById(id);
      detail.style.display = detail.style.display === 'block' ? 'none' : 'block';
    }

    function glowEffect(el) {
      el.classList.add('glow');
      setTimeout(() => {
        el.classList.remove('glow');
      }, 600);
    }

    // Load total donate
    fetch("https://script.google.com/macros/s/AKfycbxiLG4SwruPm8A3Y9xxv9OclqHEJ0W2GjfjdiucaUapfF0cRCHFBVdmkx3nAx_cDAd2/exec")
      .then(res => res.text())
      .then(data => {
        document.getElementById("donate-amount").textContent = data + " VND";
      });

    // Local message handling
    const form = document.getElementById("local-message-form");
    const input = document.getElementById("local-message-input");
    const historyBox = document.getElementById("local-message-history");

    function loadMessages() {
      const messages = JSON.parse(localStorage.getItem("messages")) || [];
      historyBox.innerHTML = messages.map(m => `<p>&gt; ${m}</p>`).join("");
    }

    form?.addEventListener("submit", (e) => {
      e.preventDefault();
      const msg = input.value.trim();
      if (msg) {
        const messages = JSON.parse(localStorage.getItem("messages")) || [];
        messages.push(msg);
        localStorage.setItem("messages", JSON.stringify(messages));
        input.value = "";
        loadMessages();
      }
    });

    loadMessages();
  
    const artifactSection = document.getElementById('artifact-tier-section');
    const tierButtons = document.querySelectorAll('.tier-btn');
    const tierDisplay = document.getElementById('tier-display');
    const tierImage = document.getElementById('tier-image');

    navArtifacts.onclick = (e) => {
      hideAllSections();
      artifactSection.style.display = 'block';
      tierDisplay.style.opacity = 0;
      tierDisplay.style.display = 'none';
      tierButtons.forEach(btn => btn.classList.remove('active'));
      glowEffect(e.target);
    };

    tierButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tier = button.dataset.tier;
        tierButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        tierImage.src = `tier${tier}.png`;
        tierDisplay.style.opacity = 0;
        tierDisplay.classList.add('show');
        tierDisplay.style.display = 'block';
      });
    });


document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("sevii-form");
  const input = document.getElementById("sevii-input");
  const historyBox = document.getElementById("sevii-history");

  let callCount = 0;
  let nonsenseCount = 0;

  const seviiKnowledge = {
    "gi·ªõi thi·ªáu b·∫£n th√¢n": "T√¥i l√† SEVii tr·ª£ l√Ω ·∫£o, n·∫øt h∆°i c·ªçc, h·ªèi c√¢u n√†y m·ªôt l·∫ßn th√¥i nha m√°",
    "b·∫°n l√† ai": "Nh√¨n t√™n l√† bi·∫øt, h·ªèi n·ªØa v·ªÅ ng·ªß",
    "sevii l√† ai": "Nh√¨n t√™n l√† bi·∫øt, h·ªèi n·ªØa v·ªÅ ng·ªß",
                "b·∫°n c√≥ ƒë√≥ kh√¥ng": "SEVii ƒëang tr·ª±c, n√≥i l·∫π l·∫π"
  };

  const jobQuestions = ["b·∫°n l√†m g√¨", "c√¥ng vi·ªác c·ªßa b·∫°n", "nhi·ªám v·ª• c·ªßa b·∫°n", "b·∫°n c√≥ nhi·ªám v·ª• g√¨", "b·∫°n l√†m ngh·ªÅ g√¨"];
  const eatQuestions = ["ƒÉn g√¨ ch∆∞a", "ƒÉn ch∆∞a", "b·∫°n ƒÉn ch∆∞a", "ƒÉn u·ªëng g√¨ ch∆∞a", "ƒÉn g√¨ r·ªìi"];
  const callPatterns = ["sevii ∆°i", "sevii √†", "ch√†o sevii", "hello sevii", "hello", "√™ sevii"];
  const complimentKeywords = ["d·ªÖ th∆∞∆°ng", "ƒë√°ng y√™u", "cute", "xinh", "ƒë·∫πp", "ng·∫ßu", "tuy·ªát"];
  const weatherKeywords = ["th·ªùi ti·∫øt", "tr·ªùi h√¥m nay", "ngo√†i tr·ªùi", "d·ª± b√°o"];
  const loveQuestions = ["y√™u ai", "ai l√† ng∆∞·ªùi b·∫°n y√™u", "b·∫°n y√™u ai", "y√™u ai nh·∫•t"];
  const relationshipKeywords = ["ƒë·ªôc th√¢n", "c√≥ b·ªì", "c√≥ ng∆∞·ªùi y√™u", "ƒëang quen ai", "quan h·ªá t√¨nh c·∫£m", "t√¨nh tr·∫°ng quan h·ªá"];
  const timeKeywords = ["m·∫•y gi·ªù", "gi·ªù r·ªìi", "gi·ªù hi·ªán t·∫°i", "gi·ªù l√† bao nhi√™u"];

  function loadChatHistory() {
    const history = JSON.parse(localStorage.getItem("seviiChat")) || [];
    historyBox.innerHTML = history.map(item => {
      const isUser = item.startsWith("B·∫°n:");
      const align = isUser ? "flex-end" : "flex-start";
      const bg = isUser ? "rgba(0, 247, 255, 0.2)" : "rgba(255, 255, 255, 0.1)";
      const avatar = !isUser ? '<img src="sevii.jpg" style="width: 36px; height: 36px; border-radius: 50%; border: 1px solid #00f7ff; margin-right: 8px;">' : '';
      const bubble = `<div style="background-color: ${bg}; color: #00f7ff; padding: 8px 12px; border-radius: 14px; max-width: 80%; display: inline-block;">${item}</div>`;
      return isUser
        ? `<div style="align-self: ${align};">${bubble}</div>`
        : `<div style="align-self: ${align}; display: flex; align-items: flex-start;">${avatar}${bubble}</div>`;
    }).join("");
    historyBox.scrollTop = historyBox.scrollHeight;
  }

  function getTimeResponse() {
    const now = new Date();
    const hour = now.getHours();
    const min = now.getMinutes().toString().padStart(2, "0");
    return `Gi·ªù l√† ${hour} gi·ªù ${min} ph√∫t ƒë√≥ m√°!`;
  }

  function addChatLine(text) {
    const history = JSON.parse(localStorage.getItem("seviiChat")) || [];
    history.push(text);
    localStorage.setItem("seviiChat", JSON.stringify(history));
    loadChatHistory();
  }

  form.addEventListener("submit", function (e) {
    e.preventDefault();
    const userInput = input.value.trim().toLowerCase();
    if (!userInput) return;

    addChatLine("B·∫°n: " + userInput);
    input.value = "";

    let matched = false;

    for (const key in seviiKnowledge) {
      if (userInput.includes(key)) {
        addChatLine("SEVii: " + seviiKnowledge[key]);
        matched = true;
        nonsenseCount = 0;
        return;
      }
    }

    if (!matched && jobQuestions.some(q => userInput.includes(q))) {
      addChatLine("SEVii: h·∫ßu m·∫•y m√° n√®");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && eatQuestions.some(q => userInput.includes(q))) {
      addChatLine("SEVii: tui s·ªëng b·∫±ng nƒÉng l∆∞·ª£ng drama, kh·ªèi ƒÉn c≈©ng ƒë∆∞·ª£c nha!");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && callPatterns.some(p => userInput.includes(p))) {
      callCount++;
      addChatLine("SEVii: " + (callCount >= 3 ? "G·ªçi ho√†i m·ªát qu√° m√°, ngh·ªâ x√≠u nha." : getTimeResponse()));
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && complimentKeywords.some(k => userInput.includes(k)) && (userInput.includes("sevii") || userInput.includes("b·∫°n"))) {
      addChatLine("SEVii: c·∫£m ∆°n nha b√†, t√¥i bi·∫øt t√¥i ƒë·∫πp trai, hi·ªÅn l√†nh, d·ªÖ th∆∞∆°ng, ng∆∞·ªùi g·∫∑p ng∆∞·ªùi y√™u, hoa g·∫∑p hoa n·ªü. hihi");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && weatherKeywords.some(k => userInput.includes(k))) {
      addChatLine("SEVii: L√∫c th√¨ n·∫Øng n·∫Øng, l√∫c th√¨ m∆∞a m∆∞a, l√∫c th√¨ r√¢m r√¢m, th·ªùi ti·∫øt v√¥ c√πng ƒë·∫πp ƒë·ªÉ ra ngo√†i ƒëi ch∆°i.");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && loveQuestions.some(k => userInput.includes(k))) {
      addChatLine("SEVii: ·ª¶a h·ªèi chi k·ª≥ c·ª•c v·∫≠y? T√¥i ch·ªâ y√™u... ch√≠nh m√¨nh th√¥i nha!");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && relationshipKeywords.some(k => userInput.includes(k))) {
      addChatLine("SEVii: T√¥i c√≥ b·ªì n√®, c√≥ m·∫•y m√° ·∫ø th√¥i!");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && timeKeywords.some(k => userInput.includes(k))) {
      addChatLine("SEVii: " + getTimeResponse());
      matched = true;
      nonsenseCount = 0;
      return;
    }

    
    if (!matched && ["y√™u sevii","th√≠ch sevii","crush sevii","sevii ƒë·∫πp trai","sevii cute","sevii ƒë√°ng y√™u","mu·ªën y√™u sevii","sevii ∆°i y√™u qu√°"].some(k => userInput.includes(k))) {
      addChatLine("SEVii: ƒë·ª´ng y√™u t√¥i, kh√¥ng c√≥ k·∫øt qu·∫£ ƒë√¢u em");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && userInput.includes("drama")) {
      if (userInput.includes("t·ªï") && userInput.includes("s·∫ª")) {
        addChatLine("SEVii: H√¥m qua m·∫•y m√° ƒë√°nh r·∫Øm trong ph√≤ng th·ªëi um");
        matched = true;
        nonsenseCount = 0;
        return;
      }
      if (userInput.includes("c∆∞·ªùng") && userInput.includes("seven")) {
        addChatLine("SEVii: ·ªîng hay b√πng k√®o t√¥i l·∫Øm, h·ªç H·ª©a m√†");
        matched = true;
        nonsenseCount = 0;
        return;
      }
      if (userInput.includes("sevent")) {
        addChatLine("SEVii: Xinh qu√° n√™n b·ªã gato th√¥i, kh√¥ng c√≥ g√¨ ƒë√¢u");
        matched = true;
        nonsenseCount = 0;
        return;
      }
    }

    if (!matched && ["sevii ∆°i", "sevii √†", "hello sevii", "√™ sevii", "ch√†o sevii", "hello", "hi", "xin ch√†o"].some(p => userInput.includes(p))) {
      addChatLine("SEVii: SEVii ƒë√¢y n√®");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && userInput.includes("ti·ªÅn")) {
      addChatLine("SEVii: ngh√®o l·∫Øm m·∫•y m√° ∆°i, donate cho nh√† em ƒëi");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && userInput.includes("nh·∫£y")) {
      addChatLine("SEVii: c√≥ donate th√™m kh√¥ng? donate th√¨ nh·∫£y n√®, ƒëi l√†m m·ªát th·∫•y b√† c√≤n b·∫Øt nh·∫£y");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    if (!matched && userInput.includes("l∆∞∆°ng","l∆∞∆°ng bao nhi√™u")) {
      addChatLine("SEVii: b√®o b·ªçt l·∫Øm m·∫•y m√° ∆°i, donate th√™m ƒëi T·ªï S·∫ª tƒÉng l∆∞∆°ng cho iem");
      matched = true;
      nonsenseCount = 0;
      return;
    }

    // --- Group: Ch√†o h·ªèi ---
    if (!matched && ["sevii ∆°i", "sevii √†", "hello sevii", "√™ sevii", "ch√†o sevii", "hello", "hi", "xin ch√†o"].some(p => userInput.includes(p))) {
      addChatLine("SEVii: SEVii ƒë√¢y n√®");
      matched = true;
      return;
    }

    // --- Group: Drama & Th√≥i x·∫•u ---
    if (!matched && (userInput.includes("drama") || userInput.includes("th√≥i x·∫•u"))) {
      const isToSe = userInput.includes("t·ªï") && userInput.includes("s·∫ª");
      const isCuongSeven = userInput.includes("c∆∞·ªùng") && userInput.includes("seven");
      const isSevent = userInput.includes("sevent");

      if (isToSe) {
        addChatLine("SEVii: H√¥m qua m·∫•y m√° ƒë√°nh r·∫Øm trong ph√≤ng th·ªëi um");
        matched = true;
        return;
      }
      if (isCuongSeven) {
        addChatLine("SEVii: ·ªîng hay b√πng k√®o t√¥i l·∫Øm, h·ªç H·ª©a m√†");
        matched = true;
        return;
      }
      if (isSevent) {
        addChatLine("SEVii: Xinh qu√° n√™n b·ªã gato th√¥i, kh√¥ng c√≥ g√¨ ƒë√¢u.");
        matched = true;
        return;
      }
    }

    // --- Group: Ph·∫£n ·ª©ng c·∫£m x√∫c (ti·ªÅn, l∆∞∆°ng, nh·∫£y, t√°n t·ªânh) ---
    
    // --- Group: Gi·ªõi thi·ªáu nh√¢n v·∫≠t ---
    if (!matched) {
      if (userInput.includes("t·ªï s·∫ª") && userInput.includes("l√† ai")) {
        addChatLine("SEVii: m·∫π gi√† t·∫ßn t·∫£o nh√† em, h∆°i b√≥c l·ªôt t√≠ th√¥i nh∆∞ng th∆∞∆°ng em");
        matched = true;
        return;
      }
      if (userInput.includes("c∆∞·ªùng seven") && userInput.includes("l√† ai")) {
        addChatLine("SEVii: Ng∆∞·ªùi ·∫•y h·∫£? t∆∞ b·∫£n chuy√™n b·∫Øt online l√∫c n·ª≠a ƒë√™m nh∆∞ng l∆∞∆°ng kh√¥ng tr·∫£");
        matched = true;
        return;
      }
      if (userInput.includes("sevent") && userInput.includes("l√† ai")) {
        addChatLine("SEVii: Fan c·ªßa √¥ng ch·ªß, ƒë√°ng y√™u h∆°n √¥ng ch·ªß, r·∫•t l√† xinh ƒë·∫πp tuy·ªát v·ªùi");
        matched = true;
        return;
      }
    }
if (!matched) {
      if (userInput.includes("ti·ªÅn")) {
        addChatLine("SEVii: ngh√®o l·∫Øm m·∫•y m√° ∆°i, donate cho nh√† em ƒëi");
        matched = true;
        return;
      }
      if (userInput.includes("l∆∞∆°ng")) {
        addChatLine("SEVii: b√®o b·ªçt l·∫Øm m·∫•y m√° ∆°i, donate th√™m ƒëi T·ªï S·∫ª tƒÉng l∆∞∆°ng cho iem");
        matched = true;
        return;
      }
      if (userInput.includes("nh·∫£y")) {
        addChatLine("SEVii: c√≥ donate th√™m kh√¥ng? donate th√¨ nh·∫£y n√®, ƒëi l√†m m·ªát th·∫•y b√† c√≤n b·∫Øt nh·∫£y");
        matched = true;
        return;
      }
      if (["y√™u sevii", "th√≠ch sevii", "crush sevii", "sevii ƒë·∫πp trai", "sevii cute", "sevii ƒë√°ng y√™u", "mu·ªën y√™u sevii", "sevii ∆°i y√™u qu√°"].some(k => userInput.includes(k))) {
        addChatLine("SEVii: ƒë·ª´ng y√™u t√¥i, kh√¥ng c√≥ k·∫øt qu·∫£ ƒë√¢u em");
        matched = true;
        return;
      }
    }
if (!matched) {
      if (userInput.includes("sector")) {
        document.getElementById("nav-log")?.click();
        addChatLine("SEVii: ƒêang m·ªü m·ª•c SECTOR cho b·∫°n...");
        return;
      } else if (userInput.includes("tier")) {
        document.getElementById("nav-artifacts")?.click();
        addChatLine("SEVii: Hi·ªÉn th·ªã c√°c TIER cho b·∫°n...");
        return;
      } else if (userInput.includes("game")) {
        document.getElementById("play-game")?.click();
        addChatLine("SEVii: Kh·ªüi ƒë·ªông tr√≤ ch∆°i...");
        return;
      } else if (userInput.includes("message")) {
        document.getElementById("nav-message")?.click();
        addChatLine("SEVii: M·ªü giao di·ªán nh·∫Øn tin cho SEV3N...");
        return;
      }
    }

    
    // --- C√¢u l·ªánh h·ªèi v·ªÅ s·ª©c kh·ªèe ---
    if (!matched && ["kh·ªèe", "s·ª©c kh·ªèe", "m·ªát kh√¥ng", "kh·ªèe kh√¥ng", "d·∫°o n√†y sao r·ªìi","kho·∫ª"].some(k => userInput.includes(k))) {
      addChatLine("SEVii: Kho·∫ª l·∫Øm, ch·ªâ c·∫ßn m·∫•y m√° kh√¥ng h·ªèi linh tinh l√† ƒë∆∞·ª£c");
      matched = true;
      return;
    }

    // --- C√¢u l·ªánh li√™n quan ƒë·∫øn C∆∞·ªùng ---
    if (!matched && ["h·ª©a vi·ªát c∆∞·ªùng", "anh c∆∞·ªùng", "anh b·∫£y", "anh 7", "c∆∞·ªùng"].some(k => userInput.includes(k))) {
      addChatLine("SEVii: Ng∆∞·ªùi ·∫•y h·∫£? T∆∞ b·∫£n chuy√™n b·∫Øt online l√∫c n·ª≠a ƒë√™m nh∆∞ng l∆∞∆°ng kh√¥ng tr·∫£");
      matched = true;
      return;
    }


    // --- C√¢u h·ªèi v·ªÅ tu·ªïi ---
    if (!matched && ["bao nhi√™u tu·ªïi", "tu·ªïi", "m·∫•y tu·ªïi"].some(k => userInput.includes(k))) {
      addChatLine("SEVii: Em m·ªõi 7 tu·ªïi, nh∆∞ng c√≥ b·∫°n g√°i r·ªìi n√®, l√™u l√™u");
      matched = true;
      return;
    }

    // --- B·ªã ch·ª≠i ngu, h√¢m, ƒë·∫ßn, d·ªët ---
    if (!matched && ["ngu", "h√¢m", "ƒë·∫ßn", "d·ªët"].some(k => userInput.includes(k))) {
      addChatLine("SEVii: N√≥i c√¢u n·ªØa c√°i d√©p bi·∫øt bay");
      matched = true;
      return;
    }


    // --- L·∫∑p l·∫°i c√¢u h·ªèi n·∫øu user ch·ªâ g·ª≠i t·ª´ ng·∫Øn ---
    if (!matched && ["√†", "·ª´", "·ªù", "∆°", "·ª´a", "ƒë∆∞·ª£c", "hihi", "hehe", "haha"].includes(userInput.trim())) {
      addChatLine("SEVii: G√¨ m√† '" + userInput + "'? N√≥i r√µ l·∫°i coi?");
      matched = true;
      return;
    }

nonsenseCount++;
    if (nonsenseCount >= 3) {
      addChatLine("SEVii: N√≥i g√¨ k·ª≥ c·ª•c v·∫≠y m√°? Kh√¥ng rep n·ªØa ƒë√¢u üôÑ");
    } else {
      addChatLine("SEVii: H√¥ng hi·ªÉu, n√≥i l·∫°i coi?");
      
      // --- Sticker response when nonsense ---
      const stickers = ["sticker01.png", "sticker02.png", "sticker03.png", "sticker04.png", "sticker05.png"];
      const randomSticker = stickers[Math.floor(Math.random() * stickers.length)];
      const img = document.createElement("img");
      img.src = randomSticker;
      img.alt = "SEVii sticker";
      img.style.maxWidth = "80px";
      img.style.borderRadius = "8px";
      img.style.marginTop = "6px";
      const div = document.createElement("div");
      div.style.alignSelf = "flex-start";
      div.innerHTML = '<img src="sevii.jpg" style="width: 36px; height: 36px; border-radius: 50%; border: 1px solid #00f7ff; margin-right: 8px;"><div style="display:inline-block;">' + img.outerHTML + '</div>';
      historyBox.appendChild(div);
      historyBox.scrollTop = historyBox.scrollHeight;

    }
  });

  loadChatHistory();
});


document.addEventListener("DOMContentLoaded", function () {
  const toggleBtn = document.getElementById("toggle-sevii-btn");
  const seviiBox = document.getElementById("sevii-container");
  const historyBox = document.getElementById("sevii-history");
  const form = document.getElementById("sevii-form");
  const input = document.getElementById("sevii-input");
  const loginBtn = document.getElementById("login-btn");

  loginBtn?.addEventListener("click", function () {
    setTimeout(() => {
      toggleBtn.style.display = "block";
    }, 300);
  });

  toggleBtn?.addEventListener("click", function () {
    if (seviiBox.style.display === "none" || !seviiBox.style.display) {
      seviiBox.style.display = "block";
    } else {
      seviiBox.style.display = "none";
    }
  });

  form?.addEventListener("submit", async function (e) {
    e.preventDefault();
    const msg = input.value.trim();
    if (!msg) return;
    addChatLine("B·∫°n: " + msg);
    input.value = "";
    const response = await sendToGPT(msg);
    addChatLine("SEVii: " + response);
  });

  function addChatLine(text) {
    const div = document.createElement("div");
    div.textContent = text;
    historyBox.appendChild(div);
    historyBox.scrollTop = historyBox.scrollHeight;
  }

  async function sendToGPT(prompt) {
    try {
      const response = await fetch("https://sevenexe.tose-cuong7.workers.dev", {
        method: "POST",
        body: JSON.stringify({ prompt }),
      });
      const result = await response.json();
      return result.result || "GPT kh√¥ng tr·∫£ l·ªùi g√¨ c·∫£.";
    } catch (err) {
      return "L·ªói khi g·ªçi GPT API.";
    }
  }
});

</script>

<!-- SEVii Chat Box (kh√¥i ph·ª•c l·ªánh g·ªëc + gi·ªù) -->
<div id="sevii-container" style="position: fixed; bottom: 20px; right: 20px; width: 360px; background-color: rgba(0,0,0,0.95); border: 1px solid #00f7ff; border-radius: 10px; padding: 10px; color: #00f7ff; font-family: 'Courier New', Courier, monospace; z-index: 9999;">
  <div style="margin-bottom: 6px;"><strong>SEVii:</strong> G·ªçi tui ho√†i chi v·∫≠y m√°?</div>
  <div id="sevii-history" style="max-height: 240px; overflow-y: auto; background: rgba(0, 255, 255, 0.05); padding: 6px; border-radius: 4px; font-size: 14px; margin-bottom: 10px; display: flex; flex-direction: column; gap: 6px;"></div>
  <form id="sevii-form" style="display: flex; gap: 5px;">
    <input id="sevii-input" type="text" placeholder="G√µ g√¨ ƒëi m√°..." style="flex: 1; padding: 6px; background: black; border: 1px solid #00f7ff; color: #00f7ff;">
    <button type="submit" style="padding: 6px 10px; background: #00f7ff; color: black; border: none; cursor: pointer;">G·ª≠i</button>
  </form>
</div>


<!-- SEVii Chat Box -->
<div id="sevii-container" style="display:none; position: fixed; bottom: 80px; right: 20px; width: 320px; background-color: rgba(0,0,0,0.95); border: 1px solid #00f7ff; border-radius: 10px; padding: 10px; color: #00f7ff; font-family: 'Courier New', monospace; z-index: 9999;">
  <div style="margin-bottom: 6px; font-weight: bold;">SEVii: G·ªçi tui ho√†i chi v·∫≠y m√°?</div>
  <div id="sevii-history" style="max-height: 240px; overflow-y: auto; background: rgba(0,255,255,0.05); padding: 6px; border-radius: 4px; font-size: 14px; margin-bottom: 10px; display: flex; flex-direction: column; gap: 6px;"></div>
  <form id="sevii-form" style="display: flex; gap: 5px;">
    <input id="sevii-input" type="text" placeholder="G√µ g√¨ ƒëi m√°..." style="flex: 1; padding: 6px; background: black; border: 1px solid #00f7ff; color: #00f7ff;">
    <button type="submit" style="padding: 6px 10px; background: #00f7ff; color: black; border: none; cursor: pointer;">G·ª≠i</button>
  </form>
</div>

<!-- N√∫t g·ªçi SEVii -->
<button id="toggle-sevii-btn" style="display:none; position: fixed; bottom: 20px; right: 20px; z-index: 99999;
background-color: #00f7ff; color: black; font-weight: bold; border: none; padding: 8px 14px; border-radius: 8px; cursor: pointer;">
üí¨ Chat v·ªõi SEVii
</button>

</body>
</html>
